(function(a,b){'object'==typeof exports&&'object'==typeof module?module.exports=b():'function'==typeof define&&define.amd?define('Visidea',[],b):'object'==typeof exports?exports.Visidea=b():a.Visidea=b()})('undefined'==typeof self?this:self,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a['default']}:function(){return a};return b.d(c,'a',c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p='',b(b.s=0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){'use strict';b.Api=c(2).Api},function(a,b,c){'use strict';(function(a){b.Api=class{constructor(b,c,d){d=d||{},this.database_id=b,this.public_token=c,this.base_uri=d.base_uri||a.env.RECAPI_URI||'https://api.visidea.ai/',this.async=d.async||!0,this._settings()}item_view(a,b,c){this._request('api/interactions','POST',{item_id:a,user_id:b,action:'view'},c,{})}item_cart(a,b,c){this._request('api/interactions','POST',{item_id:a,user_id:b,action:'cart'},c,{})}item_purchase(a,b,c){this._request('api/interactions','POST',{item_id:a,user_id:b,action:'purchase'},c,{})}item_favorite(a,b,c){this._request('api/interactions','POST',{item_id:a,user_id:b,action:'favorite'},c,{})}merge_users(a,b,c){this._request('api/merge_users','POST',{old_user_id:a,new_user_id:b},c,{})}recommend(a,b,c,d,e,f,g){var h={algo:a,n_rec:e,user_id:b};('item'===a||'similarity'===a)&&(h.item_id=c),{}!==d&&(h.query=d),this._request('api/recommend','POST',h,f,g)}visualsearch(a,b,c){this._request('api/visualsearch','POST',{img:a},b,c)}visualrecommend(a,b,c,d){this._request('api/visualrecommend','POST',{img:a,n_rec:b},c,d)}uuidv4(){return'10000000-1000-4000-8000-100000000000'.replace(/[018]/g,(a)=>(a^crypto.getRandomValues(new Uint8Array(1))[0]&15>>a/4).toString(16))}_settings(){var a=this;this._request('api/settings','GET',{},function(b){a.conf=b},{})}_request(a,b,c,d,e){var f=new XMLHttpRequest,g=this.base_uri+a;'GET'===b&&0<c.lenght&&(g+='?'+new URLSearchParams(c).toString()),f.open(b,g,!0),f.setRequestHeader('Accept','application/json'),f.setRequestHeader('Content-Type','application/json'),f.setRequestHeader('X-Recommendify-Token',this.public_token),f.onreadystatechange=function(){if(f.readyState===XMLHttpRequest.DONE&&200===f.status&&'function'==typeof d)return d(JSON.parse(this.responseText),e)},'GET'===b&&f.send(),'POST'===b&&f.send(JSON.stringify(c))}}}).call(b,c(3))},function(a){function b(){throw new Error('setTimeout has not been defined')}function c(){throw new Error('clearTimeout has not been defined')}function d(a){if(j===setTimeout)return setTimeout(a,0);if((j===b||!j)&&setTimeout)return j=setTimeout,setTimeout(a,0);try{return j(a,0)}catch(b){try{return j.call(null,a,0)}catch(b){return j.call(this,a,0)}}}function e(a){if(k===clearTimeout)return clearTimeout(a);if((k===c||!k)&&clearTimeout)return k=clearTimeout,clearTimeout(a);try{return k(a)}catch(b){try{return k.call(null,a)}catch(b){return k.call(this,a)}}}function f(){o&&m&&(o=!1,m.length?n=m.concat(n):p=-1,n.length&&g())}function g(){if(!o){var a=d(f);o=!0;for(var b=n.length;b;){for(m=n,n=[];++p<b;)m&&m[p].run();p=-1,b=n.length}m=null,o=!1,e(a)}}function h(a,b){this.fun=a,this.array=b}function i(){}var j,k,l=a.exports={};(function(){try{j='function'==typeof setTimeout?setTimeout:b}catch(a){j=b}try{k='function'==typeof clearTimeout?clearTimeout:c}catch(a){k=c}})();var m,n=[],o=!1,p=-1;l.nextTick=function(a){var b=Array(arguments.length-1);if(1<arguments.length)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];n.push(new h(a,b)),1!==n.length||o||d(g)},h.prototype.run=function(){this.fun.apply(null,this.array)},l.title='browser',l.browser=!0,l.env={},l.argv=[],l.version='',l.versions={},l.on=i,l.addListener=i,l.once=i,l.off=i,l.removeListener=i,l.removeAllListeners=i,l.emit=i,l.prependListener=i,l.prependOnceListener=i,l.listeners=function(){return[]},l.binding=function(){throw new Error('process.binding is not supported')},l.cwd=function(){return'/'},l.chdir=function(){throw new Error('process.chdir is not supported')},l.umask=function(){return 0}}])});
//# sourceMappingURL=visidea-api-client.min.js.map